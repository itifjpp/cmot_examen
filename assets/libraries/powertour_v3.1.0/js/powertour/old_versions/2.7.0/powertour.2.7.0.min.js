/*
 * ************************************************************* *
 * Name       : Power Tour                                       *
 * Date       : June 2012                                        *
 * Owner      : CreativeMilk                                     *
 * Url        : www.creativemilk.net                             *
 * Version    : 2.7.0                                            *
 * Updated    : 2015-08-18 13:20:10 UTC+02:00                    *
 * Developer  : Mark                                             *
 * Dependency :                                                  *
 * Lib        : jQuery 1.7+                                      *
 * Licence    : NOT free                                         *
 * http://codecanyon.net/item/power-tour-powerfull-creative-jquery-tour-plugin/3246071
 * ************************************************************* *
 */

!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):e(t.jQuery)}(this,function(t){function e(e,o){this.obj=t(e),this.o=t.extend({},t.fn[r].defaults,o),this.init()}var r="powerTour";e.prototype={init:function(){var e=this;bd=t("body"),clickEvent="click touchstart",screenPos=new Array("sc","stl","stm","str","srm","sbr","sbm","sbl","slm"),cdInterval="",d_pwac="data-powertour-action",d_pwcs="data-powertour-currentstep",d_pwfx="data-powertour-fx",d_pwfo="data-powertour-fxout",d_pwid="data-powertour-tour",d_pwpa="data-powertour-pause",d_pwph="data-powertour-placeholder",d_pwps="data-powertour-previousstep",d_pwrn="data-powertour-run",d_pwst="data-powertour-step",d_pwsw="data-powertour-startwith",d_pwtg="data-powertour-trigger",d_pwtm="data-powertour-timer",c_pwsw="powertour-show",c_pwhd="powertour-hide",c_pwhl="powertour-highlight",c_pwhk="powertour-hook",c_pwdc="powertour-disable-cancel",c_pwst="powertour-step",c_pwmk="powertour-mask",c_pwkv="powertour-keepvisible",c_pwat="powertour-active";var r=function(){var t=document.createElement("p").style,e=["ms","O","Moz","Webkit"];if(""==t.transition)return!0;for(;e.length;)if(e.pop()+"Transition"in t)return!0;return!1}();r||bd.attr(d_pwfx,!1),t("#"+c_pwmk).length<1&&bd.append('<div id="'+c_pwmk+'"></div>'),e._build(),e._clickEvents(),e._keyboardEvents(),e._runOnStart()},_build:function(){var e=this;t.each(e.o.tours,function(r,o){var i=(o.stepDefaults[0],t(o.trigger).attr(d_pwsw)),r=parseInt(r+1);if(isNaN(i))var s=void 0!==o.startWith&&""!=t.trim(o.startWith)&&"0"!=o.startWith?o.startWith:1;else var s=i;t(o.trigger).attr({"data-powertour-startwith":s,"data-powertour-trigger":r}).addClass(c_pwdc),t.each(o.steps,function(t,i){var t=parseInt(t+1);e._setPosition(i,r,t,o,!0)})})},_setPosition:function(e,r,o,i,s){var a="["+d_pwid+'="'+r+'"]['+d_pwst+'="'+o+'"]',p=i.stepDefaults[0],d=void 0!==e.width&&""!=t.trim(e.width)?e.width:p.width,n=void 0!==e.position&&""!=t.trim(e.position)?e.position:p.position,c=void 0!==e.offsetY&&""!=t.trim(e.offsetY)?e.offsetY:p.offsetY,l=void 0!==e.offsetX&&""!=t.trim(e.offsetX)?e.offsetX:p.offsetX,u=void 0!==e.highlight&&""!=t.trim(e.highlight)?e.highlight:p.highlight;if(-1==t.inArray(n,screenPos)){var f=t(e.hookTo);f.addClass(c_pwhk)}else var f=bd;if(s===!0){var h='<div class="'+c_pwst+" "+c_pwdc+'" '+d_pwid+'="'+r+'" '+d_pwst+'="'+o+'" id="pw-'+r+"-"+o+'" tabindex="-1" role="dialog" aria-hidden="true"></div>';f.append(h).children(a).width(d).html(t(e.content)).children().show()}var w=t(a),v=f.outerWidth(),_=(f.outerHeight(),w.outerWidth()),g=w.outerHeight();switch(n){case"tl":w.css({left:l,top:-g-c});break;case"tm":w.css({left:"50%",marginLeft:-(_/2)-l,top:-g-c});break;case"tr":w.css({right:l,top:-g-c});break;case"rt":w.css({left:v+l,top:c});break;case"rm":w.css({left:v+l,top:"50%",marginTop:-(g/2)-c});break;case"rb":w.css({left:v+l,bottom:c});break;case"bl":w.css({left:l,bottom:-g-c});break;case"bm":w.css({left:"50%",marginLeft:-(_/2)-l,bottom:-g-c});break;case"br":w.css({right:l,bottom:-g-c});break;case"lt":w.css({right:v+l,top:c});break;case"lm":w.css({right:v+l,top:"50%",marginTop:-(g/2)-c});break;case"lb":w.css({right:v+l,bottom:c});break;case"sc":w.css({left:"50%",top:"50%",marginLeft:-(d/2)-l,marginTop:-(g/2)-c,position:"fixed"});break;case"stl":w.css({left:20-l,top:20-c,position:"fixed"});break;case"stm":w.css({left:"50%",marginLeft:-(d/2)-l,top:20-c,position:"fixed"});break;case"str":w.css({right:20-l,top:20-c,position:"fixed"});break;case"srm":w.css({right:20-l,top:"50%",marginTop:-(g/2)-c,position:"fixed"});break;case"sbr":w.css({right:20-l,bottom:20-c,position:"fixed"});break;case"sbm":w.css({left:"50%",bottom:20-c,marginLeft:-(d/2)-l,position:"fixed"});break;case"sbl":w.css({left:20-l,bottom:20-c,position:"fixed"});break;case"slm":w.css({left:20-l,top:"50%",marginTop:-(g/2)-c,position:"fixed"});break;case!1:break;default:w.css({right:v+l,top:c})}u===!0&&f.addClass(c_pwhl)},_tourDataVars:function(){var e=this;id=bd.attr(d_pwid),isNaN(id)||(cs=bd.attr(d_pwcs),ps=bd.attr(d_pwps),oid=1==id?1:id,id=0==id?0:id-1,ocs=1==cs?1:cs,cs=0==cs?1:cs-1,void 0!==ps?(ops=1==ps?1:ps,ps=0==ps?1:ps-1):ops=ps,tour=e.o.tours[id],step=tour.steps[cs],def=tour.stepDefaults[0],hook=tour.steps[cs].hookTo,scrollHorizontal=tour.scrollHorizontal,loopTour=tour.loopTour,highlightStartSpeed=tour.highlightStartSpeed,highlightEndSpeed=tour.highlightEndSpeed,countSteps=tour.steps.length,csObj=t("["+d_pwst+"="+ocs+"]["+d_pwid+"="+oid+"]"),psObj=t("["+d_pwst+"="+ops+"]["+d_pwid+"="+oid+"]"),position=void 0!==step.position&&""!=t.trim(step.position)?step.position:def.position,center=void 0!==step.center&&""!=t.trim(step.center)?step.center:def.center,scrollSpeed=void 0!==step.scrollSpeed&&""!=t.trim(step.scrollSpeed)?step.scrollSpeed:def.scrollSpeed,scrollEasing=void 0!==step.scrollEasing&&""!=t.trim(step.scrollEasing)?step.scrollEasing:def.scrollEasing,scrollDelay=void 0!==step.scrollDelay&&""!=t.trim(step.scrollDelay)?step.scrollDelay:def.scrollDelay,highlight=void 0!==step.highlight&&""!=t.trim(step.highlight)?step.highlight:def.highlight,fxIn=void 0!==step.fxIn&&""!=t.trim(step.fxIn)?step.fxIn:def.fxIn,fxOut=void 0!==step.fxOut&&""!=t.trim(step.fxOut)?step.fxOut:def.fxOut,showStepDelay=void 0!==step.showStepDelay&&""!=t.trim(step.showStepDelay)?step.showStepDelay:def.showStepDelay,delay=void 0!==step.delay&&""!=t.trim(step.delay)?step.delay:def.delay,timer=void 0!==step.timer&&""!=t.trim(step.timer)?step.timer:def.timer,keepVisible=void 0!==step.keepVisible&&""!=t.trim(step.keepVisible)?step.keepVisible:def.keepVisible,void 0!==ps?(prevStep=tour.steps[ps],prevFxOut=void 0!==prevStep.fxOut&&""!=t.trim(prevStep.fxOut)?prevStep.fxOut:def.fxOut,keepHighlighted=void 0!==prevStep.keepHighlighted&&""!=t.trim(prevStep.keepHighlighted)?prevStep.keepHighlighted:def.keepHighlighted):keepHighlighted=!1)},_fxIn:function(e,r){if(void 0!==bd.attr(d_pwid)){var r=t.trim(r);if(t("."+c_pwat).removeClass(c_pwat),e.parents("."+c_pwhk).addClass(c_pwat),"false"==bd.attr(d_pwfx))var o=c_pwsw;else if(""==r||"none"==r)var o=c_pwsw;else var o=r+" animated";if(1==keepVisible)var i=c_pwkv;else var i="";e.not("."+c_pwkv).attr("class",c_pwst+" "+c_pwdc+" "+o+" "+i)}},_fxOut:function(e,r){if(void 0!==bd.attr(d_pwid)){{t.trim(r)}if("false"==bd.attr(d_pwfx)||""==r||"none"==r)var o="";else var o=r+" animated";e.not("."+c_pwkv).attr("class",c_pwst+" "+c_pwhd+" "+o),e.filter("."+c_pwkv).attr(d_pwfo,o)}},_goTo:function(e,r,o,i,s,a,p,d,n){function c(){p===!1&&d===!1&&t("#"+c_pwmk).fadeOut(isNaN(highlightEndSpeed)?200:highlightEndSpeed)}if(c(),r.not("."+c_pwkv).attr("class",c_pwst),t("."+c_pwhk+"."+c_pwdc).removeClass(c_pwdc),-1==t.inArray(i,screenPos)){var l=t(window).height(),u=t(window).width();if(n===!0){if("step"==o||t(e).outerWidth()>=u)var f=r.show().offset().left-u/2+r.outerWidth()/2;else var f=t(e).offset().left-u/2+t(e).outerWidth()/2;var h={scrollLeft:f}}else{if("step"==o||t(e).outerHeight()>=l)var f=r.show().offset().top-l/2+r.outerHeight()/2;else var f=t(e).offset().top-l/2+t(e).outerHeight()/2;var h={scrollTop:f}}var w=!1;t("html, body").stop(!0,!0).animate(h,s,a,function(){w?p===!0&&void 0!==bd.attr(d_pwid)&&(t(e).addClass(c_pwdc),t("#"+c_pwmk).fadeIn(isNaN(highlightStartSpeed)?200:highlightStartSpeed)):(w=!0,c())})}else p===!0&&void 0!==bd.attr(d_pwid)&&(t(e).addClass(c_pwdc),t("#"+c_pwmk).fadeIn(isNaN(highlightStartSpeed)?200:highlightStartSpeed))},_runTour:function(){var e=this;t("["+d_pwph+'="timer"]').html(""),clearInterval(window.cdInterval),bd.attr(d_pwtm,!1),bd.removeAttr(d_pwpa),e._tourDataVars(),void 0==bd.attr(d_pwrn)&&("function"==typeof tour.onStartTour&&tour.onStartTour.call(this,{currentStep:csObj}),bd.attr(d_pwrn,"true")),void 0!==ps&&(e._fxOut(psObj,prevFxOut),void 0!==prevStep.onHideStep&&"function"==typeof prevStep.onHideStep?prevStep.onHideStep.call(this,{currentStep:csObj,previousStep:psObj}):"function"==typeof def.onHideStep&&def.onHideStep.call(this,{currentStep:csObj,previousStep:psObj})),setTimeout(function(){e._goTo(hook,csObj,center,position,scrollSpeed,scrollEasing,highlight,keepHighlighted,scrollHorizontal),void 0!==cs&&setTimeout(function(){e._fxIn(csObj,fxIn),e._timer(timer),void 0!==step.onShowStep&&"function"==typeof step.onShowStep?step.onShowStep.call(this,{currentStep:csObj,previousStep:psObj}):"function"==typeof def.onShowStep&&def.onShowStep.call(this,{currentStep:csObj,previousStep:psObj}),"function"==typeof e.o.tours[id].onProgress&&e.o.tours[id].onProgress.call(this,{stepIndex:parseInt(cs+1),totalSteps:parseInt(countSteps),tourIndex:parseInt(id+1)})},showStepDelay)},scrollDelay)},_endTour:function(e){var r=this;clearInterval(window.cdInterval),r._tourDataVars(),r._fxOut(csObj,fxOut),void 0!==step.onHideStep&&"function"==typeof step.onHideStep?step.onHideStep.call(this,{currentStep:csObj,previousStep:psObj}):"function"==typeof def.onHideStep&&def.onHideStep.call(this,{currentStep:csObj,previousStep:psObj}),"function"==typeof tour.onEndTour&&tour.onEndTour.call(this,{currentStep:csObj,previousStep:psObj,endType:e}),t("."+c_pwkv).length>0&&t("."+c_pwkv).each(function(){var e=t(this).attr(d_pwfo);t(this).addClass(e)}),bd.removeAttr(d_pwid+" "+d_pwcs+" "+d_pwps+" "+d_pwtm+" "+d_pwrn+" "+d_pwpa+" "+d_pwfo),t("#"+c_pwmk).animate({opacity:0},isNaN(highlightEndSpeed)?200:highlightEndSpeed,function(){t(this).removeAttr("style")}),t("."+c_pwat).removeClass(c_pwat),setTimeout(function(){bd.attr(d_pwrn)||t("."+c_pwst).attr("class",c_pwst+" "+c_pwdc)},1200)},_actionButtons:function(e,r){var o=this;if(o._tourDataVars(),void 0!==id){total=parseInt(countSteps-1),cs=parseInt(cs);var i=t("[data-powertour-disable-all]").attr("data-powertour-disable-all");switch(e){case"first":if(void 0!==i||void 0!==t("[data-powertour-disable-first]").attr("data-powertour-disable-first"))return!1;var s=0;break;case"last":if(void 0!==i||void 0!==t("[data-powertour-disable-last]").attr("data-powertour-disable-last"))return!1;var s=total;break;case"prev":if(void 0!==i||void 0!==t("[data-powertour-disable-prev]").attr("data-powertour-disable-prev"))return!1;if(cs<=0)if(loopTour===!0)var s=total;else var s=0;else var s=cs-1;break;case"next":case"timer":if((void 0!==i||"false"==bd.attr("data-powertour-timer"))&&void 0!==t("[data-powertour-disable-next]").attr("data-powertour-disable-next"))return!1;if(cs>=total)if(loopTour===!0)var s=0;else if("false"==bd.attr("data-powertour-timer"))var s=total;else"next"!=e&&o._endTour("stop");else var s=cs+1;break;case"pause":case"play":case"toggleplay":"false"!=bd.attr(d_pwtm)&&(clearInterval(window.cdInterval),"play"==e&&(o._timer(bd.attr(d_pwtm)),bd.removeAttr(d_pwpa)),"pause"==e&&bd.attr(d_pwpa,!0),"toggleplay"==e&&("toggleplay"==e&&"true"==bd.attr(d_pwpa)?(o._timer(bd.attr(d_pwtm)),bd.removeAttr(d_pwpa)):bd.attr(d_pwpa,!0)));break;case"stop":if(void 0!==i||void 0!==t("[data-powertour-disable-stop]").attr("data-powertour-disable-stop"))return!1;o._endTour("stop");var s="stop";break;case"goto":if(void 0!==i||void 0!==t("[data-powertour-disable-goto]").attr("data-powertour-disable-goto"))return!1;var s=r-1}isNaN(s)||s==cs||(bd.attr({"data-powertour-currentstep":s+1,"data-powertour-previousstep":cs+1}),o._runTour())}},_timer:function(e){function r(){function t(t,e,r){var o=(Math.floor(t/e)%r).toString();if(o.length<2)var o="0"+o;return o}mins=t(a,6e4,60),secs=t(a,1e3,60),i.html(mins+":"+secs),bd.attr(d_pwtm,mins+":"+secs)}var o=this,i=t("["+d_pwph+'="timer"]');if(e!==!1&&"00:00"!=e&&e.match("^(60:00|[0-5][0-9]:[0-5][0-9])$")){var s=e.split(":").reverse(),a=parseInt(1e3*s[0]+6e4*s[1]);i.html(e),bd.attr(d_pwtm,e),window.cdInterval=setInterval(function(){0!=a?(a-=1e3,r()):o._actionButtons("timer",!1)},1e3)}},_clickEvents:function(){var e=this;bd.on(clickEvent,"["+d_pwtg+"]",function(r){if(r.stopPropagation(),r.preventDefault(),r.handled===!0)return!1;bd.attr(d_pwid)&&e._endTour("end");var o=t(this).attr(d_pwtg),i=t(this).attr(d_pwsw);void 0!==o&&(bd.attr({"data-powertour-tour":o,"data-powertour-currentstep":i,"data-powertour-timer":!1}),e._runTour()),(t(this).is("a")||t(this).parents().is("a"))&&r.preventDefault(),r.handled=!0}),bd.on(clickEvent,"["+d_pwac+"]:not(.powertour-disable-action)",function(r){return r.stopPropagation(),r.preventDefault(),r.handled===!0?!1:(e._actionButtons(t(this).attr(d_pwac),t(this).attr("data-powertour-goto")),r.preventDefault(),r.handled=!0,void 0)}),t(document).on(clickEvent,this,function(r){var o=bd.attr(d_pwid);if(!(void 0===o||!e.o.tours[0==o?0:o-1].easyCancel||t(r.target).is(t("."+c_pwdc))||t(r.target).is(t("."+c_pwdc+" *"))||t(r.target).is(t("."+c_pwat))||t(r.target).is(t("."+c_pwat+" *"))||t(r.target).is(t("["+d_pwac+"]"))||t(r.target).is(t("["+d_pwac+"] *")))){if(r.stopPropagation(),r.preventDefault(),r.handled===!0)return!1;e._endTour("cancel"),r.handled=!0}})},_keyboardEvents:function(){var t=this;bd.on("keyup",function(e){var r=bd.attr(d_pwid);void 0!==r&&t.o.tours[0==r?0:r-1].escKeyCancel===!0&&27==e.keyCode&&t._endTour("cancel")}),bd.on("keydown",function(e){var r=bd.attr(d_pwid);void 0!==r&&t.o.tours[0==r?0:r-1].keyboardNavigation===!0&&(32==e.keyCode&&(e.preventDefault(),t._actionButtons("toggleplay",!1)),37==e.keyCode&&t._actionButtons("prev",!1),39==e.keyCode&&t._actionButtons("next",!1))})},_runOnStart:function(){function t(t){for(var e=window.location.search.substring(1),r=e.split("&"),o=0;o<r.length;o++){var i=r[o].split("=");if(i[0]==t)return i[1]}return!1}var e=this,r=t("powertour"),o=t("startwith");if(!isNaN(r)&&r!==!1&&void 0!==r){if(0!=r)var i=r;else var i=1;if(isNaN(o)||o===!1||void 0===o)var s=1;else var s=o;bd.attr({"data-powertour-tour":i,"data-powertour-currentstep":s,"data-powertour-timer":!1}),e._runTour()}},update:function(e){var r=this;if(!t.isArray(e))var e=[e];t.each(e,function(e,o){var i=t(o).parent().attr(d_pwid),s=t(o).parent().attr(d_pwst),a=0==i?0:i-1,p=0==s?0:s-1,o=r.o.tours[a],d=o.steps[p];r._setPosition(d,i,s,o,!1)})},navigation:function(e){var r=this;t.isArray(e)?r._actionButtons(e[0],e[1]):r._actionButtons(e,!1)},run:function(e){var r=this;if(t.isArray(e)){if(isNaN(e[0])||isNaN(e[1]))var o=1,i=1;else var o=e[0],i=e[1];var i=0==i?1:i}else{if(isNaN(e))var o=1;else var o=e;var s=r.o.tours[0==o?0:o-1].startWith,i=""==s||" "==s||void 0==s?1:s}bd.attr({"data-powertour-tour":0==o?1:o,"data-powertour-currentstep":i,"data-powertour-timer":!1}),r._runTour()},end:function(){var t=this;t._endTour("stop")},destroy:function(){var e=this;isNaN(bd.attr(d_pwid))||e._endTour("end"),t("."+c_pwst).children().hide().unwrap(),t("#"+c_pwmk).remove(),t("["+d_pwtg+"]").removeAttr(d_pwtg+" "+d_pwsw).removeClass(c_pwdc),t("."+c_pwhk).removeClass(c_pwhk),bd.off("click",e._clickEvents()).off("keydown keyup",e._keyboardEvents()).removeData(r)}},t.fn[r]=function(o,i){return this.each(function(){var s=t(this),a=s.data(r),p="object"==typeof o&&o;a||s.data(r,a=new e(this,p)),"string"==typeof o&&a[o](i)})},t.fn[r].defaults={tours:[{trigger:"",startWith:"",easyCancel:"",escKeyCancel:"",scrollHorizontal:"",keyboardNavigation:"",loopTour:"",highlightStartSpeed:"",highlightEndSpeed:"",onStartTour:function(){},onEndTour:function(){},onProgress:function(){},steps:[{hookTo:"",content:"",width:"",position:"",offsetY:"",offsetX:"",fxIn:"",fxOut:"",showStepDelay:"",center:"",scrollSpeed:"",scrollEasing:"",scrollDelay:"",highlight:"",keepHighlighted:"",timer:"",keepVisible:"",onShowStep:function(){},onHideStep:function(){}}],stepDefaults:[{width:"",position:"",offsetY:"",offsetX:"",showStepDelay:"",fxIn:"",fxOut:"",center:"",scrollSpeed:"",scrollEasing:"",scrollDelay:"",highlight:"",keepHighlighted:"",timer:"",keepVisible:"",onShowStep:function(){},onHideStep:function(){}}]}]},t[r]=function(){var e=t(document.body);e[r].apply(e,arguments)}});