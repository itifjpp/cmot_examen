/*
 * Name       : Power Tour TINY
 * Date       : June 2012
 * Owner      : CreativeMilk
 * Url        : www.jquerypowertour.com
 * Version    : 3.0.0
 * Updated    : 2015-11-20 19:20:10 UTC+02:00
 * Developer  : Mark
 * Dependency : 
 * Lib        : jQuery 1.7+
 * Licence    : NOT free, http://codecanyon.net/item/power-tour-powerfull-creative-jquery-tour-plugin/3246071
 */

!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):e(t.jQuery)}(this,function(t){function e(e,r){this.obj=t(e),this.o=t.extend({},t.fn[o].defaults,r),this.init()}var o="powerTour";e.prototype={init:function(){var e=this;if(bd=t("body"),clickEvent="click touchstart",screenPos=new Array("sc","stl","stm","str","srm","sbr","sbm","sbl","slm"),cdInterval="",cssAnimationSpeed=1e3,d_pwac="data-powertour-action",d_pwcs="data-powertour-currentstep",d_pwid="data-powertour-tour",d_pwps="data-powertour-previousstep",d_pwrn="data-powertour-run",d_pwst="data-powertour-step",d_pwsw="data-powertour-startwith",d_pwtg="data-powertour-trigger",c_pwsw="powertour-show powertour-fxin",c_pwhd="powertour-hide powertour-fxout",c_pwhl="powertour-highlight",c_pwhk="powertour-hook",c_pwdc="powertour-disable-cancel",c_pwst="powertour-step",c_pwmk="powertour-mask",c_pwah="powertour-activehook",c_pwas="powertour-activestep",t("#"+c_pwmk).length<1){var o='<div id="'+c_pwmk+'"></div>';void 0!=e.o.appendMask&&e.o.appendMask===!1?bd.prepend(o):bd.append(o)}e._build(),e._clickEvents(),e._keyboardEvents(),e._runOnStart()},_build:function(){var e=this;t.each(e.o.tours,function(o,r){var s=t(r.trigger).attr(d_pwsw),o=parseInt(o+1);if(isNaN(s))var a=void 0!==r.startWith&&""!=t.trim(r.startWith)&&"0"!=r.startWith?r.startWith:1;else var a=s;t(r.trigger).attr({"data-powertour-startwith":a,"data-powertour-trigger":o}).addClass(c_pwdc),t.each(r.steps,function(t,s){var t=parseInt(t+1);e._setPosition(s,o,t,r,!0)})})},_setPosition:function(e,o,r,s,a){var i="["+d_pwid+'="'+o+'"]['+d_pwst+'="'+r+'"]',d=void 0!==e.width&&""!=t.trim(e.width)?e.width:300,p=void 0!==e.position&&""!=t.trim(e.position)?e.position:"tl",n=void 0!==e.offsetY&&""!=t.trim(e.offsetY)?e.offsetY:0,c=void 0!==e.offsetX&&""!=t.trim(e.offsetX)?e.offsetX:0,l=void 0!==e.highlight&&""!=t.trim(e.highlight)?e.highlight:!1;if(-1==t.inArray(p,screenPos)){var u=t(e.hookTo);u.addClass(c_pwhk)}else var u=bd;if(a===!0){var h='<div class="'+c_pwst+" "+c_pwdc+'" '+d_pwid+'="'+o+'" '+d_pwst+'="'+r+'" id="pw-'+o+"-"+r+'" tabindex="-1" role="dialog" aria-hidden="true"></div>';u.append(h).children(i).width(d).html(t(e.content)).children().show()}var w=t(i),f=u.outerWidth(),v=(u.outerHeight(),w.outerWidth()),_=w.outerHeight();switch(p){case"tl":w.css({left:c,top:-_-n});break;case"tm":w.css({left:"50%",marginLeft:-(v/2)-c,top:-_-n});break;case"tr":w.css({right:c,top:-_-n});break;case"rt":w.css({left:f+c,top:n});break;case"rm":w.css({left:f+c,top:"50%",marginTop:-(_/2)-n});break;case"rb":w.css({left:f+c,bottom:n});break;case"bl":w.css({left:c,bottom:-_-n});break;case"bm":w.css({left:"50%",marginLeft:-(v/2)-c,bottom:-_-n});break;case"br":w.css({right:c,bottom:-_-n});break;case"lt":w.css({right:f+c,top:n});break;case"lm":w.css({right:f+c,top:"50%",marginTop:-(_/2)-n});break;case"lb":w.css({right:f+c,bottom:n});break;case"sc":w.css({left:"50%",top:"50%",marginLeft:-(d/2)-c,marginTop:-(_/2)-n,position:"fixed"});break;case"stl":w.css({left:20-c,top:20-n,position:"fixed"});break;case"stm":w.css({left:"50%",marginLeft:-(d/2)-c,top:20-n,position:"fixed"});break;case"str":w.css({right:20-c,top:20-n,position:"fixed"});break;case"srm":w.css({right:20-c,top:"50%",marginTop:-(_/2)-n,position:"fixed"});break;case"sbr":w.css({right:20-c,bottom:20-n,position:"fixed"});break;case"sbm":w.css({left:"50%",bottom:20-n,marginLeft:-(d/2)-c,position:"fixed"});break;case"sbl":w.css({left:20-c,bottom:20-n,position:"fixed"});break;case"slm":w.css({left:20-c,top:"50%",marginTop:-(_/2)-n,position:"fixed"});break;case!1:break;default:w.css({right:f+c,top:n})}l===!0&&u.addClass(c_pwhl)},_tourDataVars:function(){var e=this;id=bd.attr(d_pwid),isNaN(id)||(cs=bd.attr(d_pwcs),ps=bd.attr(d_pwps),oid=1==id?1:id,id=0==id?0:id-1,ocs=1==cs?1:cs,cs=0==cs?1:cs-1,void 0!==ps?(ops=1==ps?1:ps,ps=0==ps?1:ps-1):ops=ps,tour=e.o.tours[id],step=tour.steps[cs],hook=tour.steps[cs].hookTo,scrollHorizontal=tour.scrollHorizontal,highlightStartSpeed=void 0===tour.highlightStartSpeed||isNaN(tour.highlightStartSpeed)?0:tour.highlightStartSpeed,highlightEndSpeed=void 0===tour.highlightEndSpeed||isNaN(tour.highlightEndSpeed)?0:tour.highlightEndSpeed,countSteps=tour.steps.length,csObj=t("["+d_pwst+"="+ocs+"]["+d_pwid+"="+oid+"]"),psObj=t("["+d_pwst+"="+ops+"]["+d_pwid+"="+oid+"]"),position=void 0!==step.position&&""!=t.trim(step.position)?step.position:"tl",center=void 0!==step.center&&""!=t.trim(step.center)?step.center:"step",scrollEasing=void 0!==step.scrollEasing&&""!=t.trim(step.scrollEasing)?step.scrollEasing:"swing",scrollDelay=void 0!==step.scrollDelay&&""!=t.trim(step.scrollDelay)?step.scrollDelay:0,highlight=void 0!==step.highlight&&""!=t.trim(step.highlight)?step.highlight:!1,showStepDelay=void 0!==step.showStepDelay&&""!=t.trim(step.showStepDelay)?step.showStepDelay:0,void 0!==ps&&(prevStep=tour.steps[ps]))},_fxIn:function(e){if(void 0!==bd.attr(d_pwid)){t("."+c_pwah).removeClass(c_pwah),e.parents("."+c_pwhk).addClass(c_pwah);var o=c_pwsw;e.attr("class",c_pwst+" "+c_pwdc+" "+o+" "+c_pwas)}},_fxOut:function(t){if(void 0!==bd.attr(d_pwid)){var e="";t.attr("class",c_pwst+" "+c_pwhd+" "+e+" "+c_pwas),setTimeout(function(){t.removeClass(c_pwas)},cssAnimationSpeed)}},_goTo:function(e,o,r,s,a,i){function d(){a===!0||t("#"+c_pwmk).fadeOut(highlightEndSpeed)}if(d(),o.attr("class",c_pwst),t("."+c_pwhk+"."+c_pwdc).removeClass(c_pwdc),-1==t.inArray(s,screenPos)){var p=t(window).height(),n=t(window).width();if(i===!0){if("step"==r||t(e).outerWidth()>=n)var c=o.show().offset().left-n/2+o.outerWidth()/2;else var c=t(e).offset().left-n/2+t(e).outerWidth()/2;var l={scrollLeft:c}}else{if("step"==r||t(e).outerHeight()>=p)var c=o.show().offset().top-p/2+o.outerHeight()/2;else var c=t(e).offset().top-p/2+t(e).outerHeight()/2;var l={scrollTop:c}}var u=!1;t("html, body").stop(!0,!0).animate(l,1e3,"swing",function(){u?a===!0&&void 0!==bd.attr(d_pwid)&&(t(e).addClass(c_pwdc),t("#"+c_pwmk).fadeIn(highlightStartSpeed)):(u=!0,d())})}else a===!0&&void 0!==bd.attr(d_pwid)&&(t(e).addClass(c_pwdc),t("#"+c_pwmk).fadeIn(highlightStartSpeed))},_runTour:function(){var t=this;t._tourDataVars(),void 0==bd.attr(d_pwrn)&&bd.attr(d_pwrn,"true"),void 0!==ps&&t._fxOut(psObj),setTimeout(function(){t._goTo(hook,csObj,center,position,highlight,scrollHorizontal),void 0!==cs&&setTimeout(function(){t._fxIn(csObj)},showStepDelay)},scrollDelay)},_endTour:function(){var e=this;e._tourDataVars(),e._fxOut(csObj),bd.removeAttr(d_pwid+" "+d_pwcs+" "+d_pwps+" "+d_pwrn),t("#"+c_pwmk).animate({opacity:0},highlightEndSpeed,function(){t(this).removeAttr("style")}),t("."+c_pwah).removeClass(c_pwah),t("."+c_pwas).removeClass(c_pwas),setTimeout(function(){bd.attr(d_pwrn)||t("."+c_pwst).attr("class",c_pwst+" "+c_pwdc)},cssAnimationSpeed)},_actionButtons:function(e,o){var r=this;if(void 0!==id){total=parseInt(countSteps-1),cs=parseInt(cs);var s=t("[data-powertour-disable-all]").attr("data-powertour-disable-all");switch(e){case"first":if(void 0!==s||void 0!==t("[data-powertour-disable-first]").attr("data-powertour-disable-first"))return!1;var a=0;break;case"last":if(void 0!==s||void 0!==t("[data-powertour-disable-last]").attr("data-powertour-disable-last"))return!1;var a=total;break;case"prev":if(void 0!==s||void 0!==t("[data-powertour-disable-prev]").attr("data-powertour-disable-prev"))return!1;if(cs<=0)var a=0;else var a=cs-1;break;case"next":if(void 0!==s&&void 0!==t("[data-powertour-disable-next]").attr("data-powertour-disable-next"))return!1;if(cs>=total){var a=total;"next"!=e&&r._endTour()}else var a=cs+1;break;case"stop":if(void 0!==s||void 0!==t("[data-powertour-disable-stop]").attr("data-powertour-disable-stop"))return!1;r._endTour();var a="stop";break;case"goto":if(void 0!==s||void 0!==t("[data-powertour-disable-goto]").attr("data-powertour-disable-goto"))return!1;var a=o-1}isNaN(a)||a==cs||(bd.attr({"data-powertour-currentstep":a+1,"data-powertour-previousstep":cs+1}),r._runTour())}},_clickEvents:function(){var e=this;bd.on(clickEvent,"["+d_pwtg+"]",function(o){if(o.stopPropagation(),o.preventDefault(),o.handled===!0)return!1;bd.attr(d_pwid)&&e._endTour();var r=t(this).attr(d_pwtg),s=t(this).attr(d_pwsw);void 0!==r&&(bd.attr({"data-powertour-tour":r,"data-powertour-currentstep":s}),e._runTour()),(t(this).is("a")||t(this).parents().is("a"))&&o.preventDefault(),o.handled=!0}),bd.on(clickEvent,"["+d_pwac+"]:not(.powertour-disable-action)",function(o){return o.stopPropagation(),o.preventDefault(),o.handled===!0?!1:(e._actionButtons(t(this).attr(d_pwac),t(this).attr("data-powertour-goto")),o.preventDefault(),o.handled=!0,void 0)}),t(document).on(clickEvent,this,function(o){var r=bd.attr(d_pwid);if(!(void 0===r||e.o.tours[0==r?0:r-1].easyCancel===!1||t(o.target).is(t("."+c_pwdc))||t(o.target).is(t("."+c_pwdc+" *"))||t(o.target).is(t("."+c_pwah))||t(o.target).is(t("."+c_pwah+" *"))||t(o.target).is(t("["+d_pwac+"]"))||t(o.target).is(t("["+d_pwac+"] *")))){if(o.stopPropagation(),o.preventDefault(),o.handled===!0)return!1;e._endTour(),o.handled=!0}})},_keyboardEvents:function(){var t=this;bd.on("keyup",function(e){var o=bd.attr(d_pwid);void 0!==o&&t.o.tours[0==o?0:o-1].escKeyCancel!==!1&&27==e.keyCode&&t._endTour()}),bd.on("keydown",function(e){var o=bd.attr(d_pwid);void 0!==o&&t.o.tours[0==o?0:o-1].keyboardNavigation!==!1&&(37==e.keyCode&&t._actionButtons("prev",!1),39==e.keyCode&&t._actionButtons("next",!1))})},_runOnStart:function(){function t(t){for(var e=window.location.search.substring(1),o=e.split("&"),r=0;r<o.length;r++){var s=o[r].split("=");if(s[0]==t)return s[1]}return!1}var e=this,o=t("powertour"),r=t("startwith");if(!isNaN(o)&&o!==!1&&void 0!==o){if(0!=o)var s=o;else var s=1;if(isNaN(r)||r===!1||void 0===r)var a=1;else var a=r;bd.attr({"data-powertour-tour":s,"data-powertour-currentstep":a}),e._runTour()}},update:function(e){var o=this;if(!t.isArray(e))var e=[e];t.each(e,function(e,r){var s=t(r).parent().attr(d_pwid),a=t(r).parent().attr(d_pwst),i=0==s?0:s-1,d=0==a?0:a-1,r=o.o.tours[i],p=r.steps[d];o._setPosition(p,s,a,r,!1)})},navigation:function(e){var o=this;t.isArray(e)?o._actionButtons(e[0],e[1]):o._actionButtons(e,!1)},run:function(e){var o=this;if(t.isArray(e)){if(isNaN(e[0])||isNaN(e[1]))var r=1,s=1;else var r=e[0],s=e[1];var s=0==s?1:s}else{if(isNaN(e))var r=1;else var r=e;var a=o.o.tours[0==r?0:r-1].startWith,s=""==a||" "==a||void 0==a?1:a}bd.attr({"data-powertour-tour":0==r?1:r,"data-powertour-currentstep":s}),o._runTour()},end:function(){var t=this;t._endTour()},destroy:function(){var e=this;isNaN(bd.attr(d_pwid))||e._endTour(),t("."+c_pwst).children().hide().unwrap(),t("#"+c_pwmk).remove(),t("["+d_pwtg+"]").removeAttr(d_pwtg+" "+d_pwsw).removeClass(c_pwdc),t("."+c_pwhk).removeClass(c_pwhk),bd.off("click",e._clickEvents()).off("keydown keyup",e._keyboardEvents()).removeData(o)}},t.fn[o]=function(r,s){return this.each(function(){var a=t(this),i=a.data(o),d="object"==typeof r&&r;i||a.data(o,i=new e(this,d)),"string"==typeof r&&i[r](s)})},t.fn[o].defaults={tours:[{trigger:"",startWith:"",easyCancel:"",escKeyCancel:"",scrollHorizontal:"",keyboardNavigation:"",highlightStartSpeed:"",highlightEndSpeed:"",steps:[{hookTo:"",content:"",width:"",position:"",offsetY:"",offsetX:"",showStepDelay:"",center:"",scrollDelay:"",highlight:""}]}]},t[o]=function(){var e=t(document.body);e[o].apply(e,arguments)}});