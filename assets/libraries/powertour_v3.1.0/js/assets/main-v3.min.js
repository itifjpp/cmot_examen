$(document).ready(function($) {

    function sticky() {
		
        if ($("body.frontpage").length > 0) {
            var t = 480
        } else {
            var t = 300
        }

        if ($(window).scrollTop() >= t) {
            $("body").addClass("scrll-active");
            $("#backtotop").fadeIn()
        } else {
            $("body").removeClass("scrll-active");
            $("#backtotop").fadeOut()
        }
    }
    sticky();

    $(window).scroll(function() {
        sticky()
    });

    $("#backtotop").click(function(t) {
        $("html, body").animate({
            scrollTop: 0
        }, 1000);
        t.preventDefault()
    });
	
    $(".gotoid").on("click", function(t) {
        var n = $(this).attr("href");
        var r = $(n).position().top + 320;
        $("html, body").animate({
            scrollTop: r
        }, 1000, "swing");
        t.preventDefault()
    });	
	
	function scrollSpyFunc(){
		if ($(window).height() > 700) {
			$("#menubox").affix({
				offset: {
					top: 380,
					bottom: function() {}
				}
			})
		}
	}
	
	scrollSpyFunc();
	
	$(window).resize(function(){
		
		if ($(window).height() < 700) {		
			$("#menubox").addClass('notaffix');			
		}else{
			$("#menubox").removeClass('notaffix');
			
			scrollSpyFunc();	
		}

	});
	
	$('body').scrollspy({
		offset: 80,
		target: '#menubox'	
	});
	
	$('.table').each(function(i,e){
				
		var th      = $(this).children('thead').find('th');
		var thTotal = th.length;

		$(this).children('tbody').children('tr').each(function(i,e){
			
			var tdTotal = $(this).children('td').length;
			
			//if(thTotal != tdTotal){
				//$(this).prepend('<td class="rsv-spantd"></td>')
			//}

			$(this).children('td').each(function(i,e){
				$(this).wrapInner('<div class="rsv-text"></div>')
				
				var label = th.eq(i).text();
				$('<div class="rsv-label">'+label+'</div>').insertBefore($(this).children());	
			});

		});
	
	});
	
	$('#hamburger').click(function(e){
		
		if($('body').hasClass('offcanvas-active')){
			$('body').removeClass('offcanvas-active')
		}else{
			$('body').addClass('offcanvas-active')
		}
		
		e.preventDefault();
		
	});
	
	$(window).resize(function(){
		$('body').removeClass('offcanvas-active')
	});
	
	$('#mob-menu > span').click(function(e){
		$('body').removeClass('offcanvas-active');
	});
	
	if($('.search').length > 0){
		$('.search').val('').hideseek({nodata: 'No results found'});
	}
	
});